-- Projekt fejlesztes
select * from Szerepkorok;
drop table Szerepkorok;


CREATE TABLE Szerepkorok (
    szerep_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    szerepnev VARCHAR2(50) UNIQUE NOT NULL
);

INSERT INTO Szerepkorok (szerepnev) VALUES ('admin');
INSERT INTO Szerepkorok (szerepnev) VALUES ('csakolvas');
INSERT INTO Szerepkorok (szerepnev) VALUES ('korlatozott');

select * from Felhasznalok;
drop table Felhasznalok;

CREATE TABLE Felhasznalok (
    felhasznalo_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    felhasznalonev VARCHAR2(50) UNIQUE NOT NULL,
    jelszo VARCHAR2(255) NOT NULL,
    szerep_id NUMBER NOT NULL,
    CONSTRAINT fk_szerep FOREIGN KEY (szerep_id) REFERENCES Szerepkorok(szerep_id)
);

INSERT INTO Felhasznalok (felhasznalonev, jelszo, szerep_id)
VALUES ('admin_user', 'password123', (SELECT szerep_id FROM Szerepkorok WHERE szerepnev = 'admin'));

SELECT f.felhasznalo_id, f.felhasznalonev, f.jelszo, s.szerepnev
FROM Felhasznalok f
JOIN Szerepkorok s ON f.szerep_id = s.szerep_id;
